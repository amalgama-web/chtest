(function(){"use strict";var t={9920:function(t,n,e){var r=e(7195),i=function(){var t=this,n=t._self._c;return n("div",{staticClass:"cart-form",attrs:{id:"app"}},[n("div",{staticClass:"cart-form__inputs"},[n("div",{staticClass:"cart-form__col"},[n("only-numbers-input",{staticClass:"cart-form__input",attrs:{value:t.currentPrice,placeholder:"Price"},on:{input:function(n){return t.onInputChangeDebounced("currentPrice",n)}}}),n("div",{staticClass:"value-title"},[t._v("Price:")]),n("div",[t._v(t._s(t.currentPrice))])],1),n("div",{staticClass:"cart-form__col"},[n("only-numbers-input",{staticClass:"cart-form__input",attrs:{value:t.currentQuantity,placeholder:"Quantity"},on:{input:function(n){return t.onInputChangeDebounced("currentQuantity",n)}}}),n("div",{staticClass:"value-title"},[t._v("Quantity:")]),n("div",[t._v(t._s(t.currentQuantity))])],1),n("div",{staticClass:"cart-form__col"},[n("only-numbers-input",{staticClass:"cart-form__input",attrs:{value:t.currentAmount,placeholder:"Amount"},on:{input:function(n){return t.onInputChangeDebounced("currentAmount",n)}}}),n("div",{staticClass:"value-title"},[t._v("Amount:")]),n("div",[t._v(t._s(t.currentAmount))])],1),n("div",{staticClass:"cart-form__col"},[n("button",{staticClass:"cart-form__btn",attrs:{disabled:t.formInProcess},on:{click:t.submit}},[t._v(" Send ")]),n("div",{staticClass:"value-title"},[t._v("Saved data:")]),n("div",{staticClass:"cart-form__code"},[t._v(t._s(t.savedDataJSON))])])]),n("div",{staticClass:"cart-form__log"},[n("span",{staticClass:"cart-form__log-title"},[t._v("Logs")]),t.log.length?n("div",t._l(t.log,(function(e,r){return n("p",{key:r+e.message,class:e.status?e.status:""},[t._v(" "+t._s(e.message)+" ")])})),0):n("p",{staticClass:"cart-form__log-placeholder"},[t._v("Events logging")])]),n("DescriptionInfo")],1)},u=[];function a(t){let n;return function(...e){clearTimeout(n),n=setTimeout(t.bind(this,...e),300)}}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}var c={sendData(t){return new Promise(((n,e)=>{const r=!(t.amount%2),i={success:r,data:r?t:null};setTimeout((()=>{r?n(i):e(i)}),1e3)}))}};function o(t,n){window.localStorage.setItem(t,n)}function l(t){return window.localStorage.getItem(t)}var d=function(){var t=this,n=t._self._c;return n("div",{staticClass:"info"},[n("button",{staticClass:"info__btn",on:{click:function(n){t.isOpen=!0}}},[t._v("i")]),t.isOpen?n("div",{staticClass:"info__modal"},[n("div",{staticClass:"info__modal-bg",on:{click:function(n){t.isOpen=!1}}}),t._m(0)]):t._e()])},p=[function(){var t=this,n=t._self._c;return n("div",{staticClass:"info__modal-body"},[n("p",[t._v("При первоначальном заполнении двух любых полей оставшееся пустое поле сразу просчитывается")]),n("p",[t._v("Далее действует стандартное правило - просчитывается то которое модифицировалось раньше всех")]),n("p",[t._v("Тупиковые значения (деление на ноль или рассчеты в которых присутсвуют пустые значения) не просчитываются")])])}],h={name:"DescriptionInfo",data(){return{isOpen:!1}},methods:{}},f=h,m=e(1001),v=(0,m.Z)(f,d,p,!1,null,null,null),g=v.exports,_=function(){var t=this,n=t._self._c;return n("input",{attrs:{type:"tel",placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{keypress:t.preventNonDigits,input:t.onInput}})},y=[],O={props:{value:{type:[String,Number]},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},methods:{onInput(t){let n=t.target.selectionStart;const e=t.target.value;let r=e.replace(/[^\d.,]|^\./g,"").replace(/,/g,".").replace(/^0+(\d)/g,"$1").replace(/^0+\./g,"0."),i=r.match(/\./g);if(i&&i.length>1){const t=r.indexOf(".");r=r.replace(/\./g,""),r=`${r.slice(0,t)}.${r.slice(t)}`}t.target.value=r,t.target.setSelectionRange(n,n),this.$emit("input",r)},preventNonDigits(t){const n=new RegExp("[0-9,.]");n.test(t.key)||t.preventDefault()}}},b=O,C=(0,m.Z)(b,_,y,!1,null,null,null),P=C.exports;const I=["currentPrice","currentQuantity","currentAmount","currentNonce","price","quantity","amount","nonce","log","inputsMutationOrder"];var S={name:"App",data(){return{currentPrice:null,currentQuantity:null,currentAmount:null,currentNonce:0,price:null,quantity:null,amount:null,nonce:null,log:[],inputsMutationOrder:["currentPrice","currentQuantity","currentAmount"],formInProcess:!1}},computed:{earlierMutatedInput(){return this.inputsMutationOrder[2]},calculatingInput(){const t=this.inputsMutationOrder.filter((t=>null===this[t]));return 2===t.length?null:1===t.length?t[0]:this.earlierMutatedInput},savedDataJSON(){return JSON.stringify({nonce:this.nonce,price:this.price,quantity:this.quantity,amount:this.amount})},currentDataJSON(){return JSON.stringify({nonce:this.currentNonce,price:this.currentPrice,quantity:this.currentQuantity,amount:this.currentAmount})}},methods:{calcInputValue(){null!==this.calculatingInput&&this[`calc${s(this.calculatingInput)}`]()},calcCurrentPrice(){""!==this.currentAmount&&""!==this.currentQuantity&&0!==+this.currentQuantity&&(this.currentPrice=String(this.currentAmount/this.currentQuantity))},calcCurrentQuantity(){""!==this.currentAmount&&""!==this.currentPrice&&0!==+this.currentPrice&&(this.currentQuantity=String(this.currentAmount/this.currentPrice))},calcCurrentAmount(){""!==this.currentPrice&&""!==this.currentQuantity&&(this.currentAmount=String(this.currentPrice*this.currentQuantity))},addLog({message:t,status:n}){this.log.unshift({message:t,status:n})},submit(){this.addLog({message:`Send form data. Current saved data: ${this.savedDataJSON} Payload: ${this.currentDataJSON}`}),this.formInProcess=!0,c.sendData({nonce:this.currentNonce,price:this.currentPrice,quantity:this.currentQuantity,amount:this.currentAmount}).then((({data:t})=>{this.nonce=t.nonce,this.price=t.price,this.quantity=t.quantity,this.amount=t.amount,this.currentNonce++,this.addLog({message:`Data saved successfully. New data: ${this.savedDataJSON}`,status:"success"})})).catch((()=>{this.addLog({message:"Error. Try later...",status:"error"})})).finally((()=>{this.formInProcess=!1}))},updateMutationOrder(t){this.inputsMutationOrder=this.inputsMutationOrder.filter((n=>n!==t)),this.inputsMutationOrder.unshift(t)},initDataFromStore(){I.forEach((t=>{const n=l(t);null!==n&&(this[t]=JSON.parse(n))}))}},created(){this.onInputChangeDebounced=a(((t,n)=>{this[t]=n,this.updateMutationOrder(t),this.calcInputValue(),this.addLog({message:`Input ${t.replace("current","")} has changed`})})),I.forEach((t=>{this.$watch((n=>n[t]),(n=>{o(t,JSON.stringify(n))}))})),this.initDataFromStore()},components:{DescriptionInfo:g,OnlyNumbersInput:P}},D=S,N=(0,m.Z)(D,i,u,!1,null,null,null),A=N.exports;r.ZP.config.productionTip=!1,new r.ZP({render:t=>t(A)}).$mount("#app")}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var u=n[r]={exports:{}};return t[r].call(u.exports,u,u.exports,e),u.exports}e.m=t,function(){var t=[];e.O=function(n,r,i,u){if(!r){var a=1/0;for(l=0;l<t.length;l++){r=t[l][0],i=t[l][1],u=t[l][2];for(var s=!0,c=0;c<r.length;c++)(!1&u||a>=u)&&Object.keys(e.O).every((function(t){return e.O[t](r[c])}))?r.splice(c--,1):(s=!1,u<a&&(a=u));if(s){t.splice(l--,1);var o=i();void 0!==o&&(n=o)}}return n}u=u||0;for(var l=t.length;l>0&&t[l-1][2]>u;l--)t[l]=t[l-1];t[l]=[r,i,u]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,r){var i,u,a=r[0],s=r[1],c=r[2],o=0;if(a.some((function(n){return 0!==t[n]}))){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(c)var l=c(e)}for(n&&n(r);o<a.length;o++)u=a[o],e.o(t,u)&&t[u]&&t[u][0](),t[u]=0;return e.O(l)},r=self["webpackChunkch_test"]=self["webpackChunkch_test"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(9920)}));r=e.O(r)})();
//# sourceMappingURL=app.631489af.js.map